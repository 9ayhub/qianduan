<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <title>更新时的一个问题</title>
        <script type="text/javascript" src="../js/vue.js"></script>
    </head>
    <body>
        <div id="root">
            
        </div>
    </body>

    <script type="text/javascript">
        Vue.config.productionTip = false
        
        let data = {
            name: "尚硅谷",
            address: "北京"
        }

        const obs = new Observer(data)
        console.log(obs)

        let vm = {}
        vm._data = data = obs

        function Observer(obj) {
            const keys = Object.keys(obj)
            keys.forEach((k)=>{
                Object.defineProperty(this, k, {
                    get() {
                        return obj[k]
                    },
                    set(val) {
                        console.log(`${k}被改了，我要忙了`)
                        obj[k] = val
                    }
                })
            })
        }

    </script>
</html>
